const contactsButton=document.querySelector(".contacts-button"),modalForm=document.querySelector(".modal-form"),popupClose=modalForm.querySelector(".popup-button-close"),formPopup=modalForm.querySelector(".form-popup"),modalUser=modalForm.querySelector(".modal-user"),modalEmail=modalForm.querySelector(".modal-email");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(o){isStorageSupport=!1}contactsButton.addEventListener("click",function(o){o.preventDefault(),modalForm.classList.add("modal-form-show"),storage?(modalUser.value=storage,modalEmail.focus()):modalUser.focus()}),popupClose.addEventListener("click",function(o){o.preventDefault(),modalForm.classList.remove("modal-form-show"),modalForm.classList.remove("modal-form-error")}),formPopup.addEventListener("submit",function(o){modalUser.value&&modalEmail.value?isStorageSupport&&localStorage.setItem("name",modalUser.value):(o.preventDefault(),modalForm.classList.remove("modal-form-error"),modalForm.offsetWidth=modalForm.offsetWidth,modalForm.classList.add("modal-form-error"))}),window.addEventListener("keydown",function(o){27===o.keyCode&&modalForm.classList.contains("modal-form-show")&&(o.preventDefault(),modalForm.classList.remove("modal-form-show"),modalForm.classList.remove("modal-form-error"))});